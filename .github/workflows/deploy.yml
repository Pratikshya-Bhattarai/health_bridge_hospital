# DISABLED - This workflow is disabled to prevent failures
# To enable: Remove the '#' from the lines below

# name: Deploy Backend to PythonAnywhere
# 
# on:
#   push:
#     branches: [ main ]
#     paths:
#       - 'backend/**'
#       - '.github/workflows/deploy.yml'
#   workflow_dispatch:
# 
# jobs:
#   deploy:
#     runs-on: ubuntu-latest
#     
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
#       
#     - name: Setup Python
#       uses: actions/setup-python@v4
#       with:
#         python-version: '3.10'
#         
#     - name: Install dependencies
#       run: |
#         cd backend
#         pip install -r requirements.txt
#         
#     - name: Run tests
#       run: |
#         cd backend
#         python manage.py test --settings=healthbridge_backend.settings
#         
#     - name: Deploy to PythonAnywhere
#       uses: appleboy/ssh-action@v1.0.3
#       if: ${{ secrets.PYTHONANYWHERE_HOST != '' && secrets.PYTHONANYWHERE_USERNAME != '' && secrets.PYTHONANYWHERE_SSH_KEY != '' }}
#       with:
#         host: ${{ secrets.PYTHONANYWHERE_HOST }}
#         username: ${{ secrets.PYTHONANYWHERE_USERNAME }}
#         key: ${{ secrets.PYTHONANYWHERE_SSH_KEY }}
#         script: |
#           # Navigate to project directory
#           cd /home/pratikshyabhattarai/health_bridge_hospital
#           
#           # Pull latest changes
#           git pull origin main
#           
#           # Navigate to backend
#           cd backend
#           
#           # Activate virtual environment
#           source venv/bin/activate
#           
#           # Install/update dependencies (remove --user flag for virtual environment)
#           pip install -r requirements.txt
#           
#           # Run database migrations
#           python manage.py migrate --settings=healthbridge_backend.settings_production
#           
#           # Collect static files
#           python manage.py collectstatic --noinput --settings=healthbridge_backend.settings_production
#           
#           # Touch WSGI file to reload the application
#           touch /var/www/pratikshyabhattarai_pythonanywhere_com_wsgi.py
#           
#           # Create logs directory if it doesn't exist
#           mkdir -p logs
#           
#           echo "Deployment completed successfully!"